<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🇹🇷 Remote Vergi</title>
    <script type="module" src="./calculator.ts"></script>
    <script src="//cdn.tailwindcss.com?plugins=typography"></script>
    <script defer src="//unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <script defer data-domain="aozisik.github.io" src="//plausible.io/js/script.js"></script>
    <link rel="preconnect" href="//fonts.googleapis.com">
    <link rel="preconnect" href="//fonts.gstatic.com" crossorigin>
    <link href="//fonts.googleapis.com/css2?family=Dm+Sans:wght@400;700;900&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                fontFamily: {
                    'sans': ['DM Sans', 'sans-serif']
                }
            }
        }
    </script>
    <style>
        .bg-pattern {
            background-color: #f8fafc;
            background-image: linear-gradient(rgba(99, 102, 241, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(99, 102, 241, 0.03) 1px, transparent 1px);
            background-size: 20px 20px;
        }

        .github-corner:hover .octo-arm {
            animation: octocat-wave 560ms ease-in-out;
        }

        @keyframes octocat-wave {

            0%,
            100% {
                transform: rotate(0)
            }

            20%,
            60% {
                transform: rotate(-25deg)
            }

            40%,
            80% {
                transform: rotate(10deg)
            }
        }

        @media (max-width: 500px) {
            .github-corner:hover .octo-arm {
                animation: none;
            }

            .github-corner .octo-arm {
                animation: octocat-wave 560ms ease-in-out;
            }
        }
    </style>
</head>

<body class="bg-pattern min-h-screen" x-data="{
        results: [], 
        form: (() => {
            const params = new URLSearchParams(window.location.search);
            const encoded = params.get('data');
            if (encoded) {
                try {
                    return JSON.parse(atob(encoded));
                } catch (e) {
                    console.error('Invalid share URL');
                }
            }
            return {
                income: '2000',
                exchangeRate: '36.5',
                accountingCosts: '1200',
                youngEntrepreneur: 'yes'
            };
        })()
    }">
    <a href="https://github.com/aozisik/remote-vergi" class="github-corner" aria-label="View source on GitHub">
        <svg width="80" height="80" viewBox="0 0 250 250"
            style="fill:#151513; color:#fff; position: fixed; top: 0; border: 0; right: 0; z-index: 50;"
            aria-hidden="true">
            <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
            <path
                d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
                fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
            <path
                d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
                fill="currentColor" class="octo-body"></path>
        </svg>
    </a>
    <div class="max-w-5xl mx-auto my-16 px-4">
        <header class="max-w-2xl mx-auto mb-16">
            <h1 class="text-4xl font-bold mb-6">🇹🇷 Remote Vergi</h1>
            <p class="prose-lg text-gray-600">
                Remote Vergi, Türkiye'den yurtdışı firmalara çalışarak döviz kazanan
                yazılımcılar için hazırlanmıştır. Vergiler ve sabit giderleri düştükten sonra
                kalan net kazancı hesaplar.
            </p>
            <p class="text-gray-500 text-sm mt-4">
                Prim ve vergiler en son 17 Mart 2024 tarihinde güncellenmiştir.
            </p>
            <p class="text-gray-400 text-xs mt-6">
                Bu araç, vergiler hakkında sadece genel bir fikir edinmek için oluşturulmuştur ve bir mali danışmanlık
                hizmeti değildir. Vergi hesaplamaları için
                bir mali müşavir ile görüşünüz.
            </p>
        </header>

        <div class="md:grid md:grid-cols-2 md:gap-8">
            <!-- Form Column -->
            <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-200">
                <h2 class="text-xl font-semibold mb-6 text-gray-800">Bilgiler</h2>
                <form class="space-y-6">
                    <div>
                        <label class="text-gray-700 font-medium mb-2 block">Aylık Kazanç</label>
                        <div
                            class="flex items-center border border-gray-200 hover:border-indigo-500 rounded-lg overflow-hidden transition-colors duration-200">
                            <div class="p-3 bg-gray-50 text-gray-600 font-medium border-r border-gray-200">€</div>
                            <input type="number" min="1" step="1" x-model="form.income"
                                class="flex-1 focus:outline-none focus:ring-1 focus:ring-indigo-500 block w-full p-3" />
                        </div>
                    </div>

                    <div>
                        <label class="text-gray-700 font-medium mb-2 block">Döviz Kuru</label>
                        <div
                            class="flex items-center border border-gray-200 hover:border-indigo-500 rounded-lg overflow-hidden transition-colors duration-200">
                            <div class="p-3 bg-gray-50 text-gray-600 font-medium border-r border-gray-200">₺</div>
                            <input type="number" min="1" step="1" x-model="form.exchangeRate"
                                class="flex-1 focus:outline-none focus:ring-1 focus:ring-indigo-500 block w-full p-3" />
                        </div>
                    </div>

                    <div>
                        <label class="text-gray-700 font-medium mb-2 block">Aylık Muhasebe Giderleri</label>
                        <div
                            class="flex items-center border border-gray-200 hover:border-indigo-500 rounded-lg overflow-hidden transition-colors duration-200">
                            <div class="p-3 bg-gray-50 text-gray-600 font-medium border-r border-gray-200">₺</div>
                            <input type="number" min="1" step="1" x-model="form.accountingCosts"
                                class="flex-1 focus:outline-none focus:ring-1 focus:ring-indigo-500 block w-full p-3" />
                        </div>
                    </div>

                    <div>
                        <label class="text-gray-700 font-medium mb-2 block">Genç girişimci desteği? (29 yaş
                            altı)</label>
                        <div class="space-x-4">
                            <label
                                class="border border-gray-200 px-5 py-3 inline-flex items-center rounded-lg hover:border-indigo-500 cursor-pointer transition-colors duration-200">
                                <input type="radio" id="gg1" value="yes" x-model="form.youngEntrepreneur"
                                    class="mr-2 text-indigo-600" />
                                <span>Evet</span>
                            </label>

                            <label
                                class="border border-gray-200 px-5 py-3 inline-flex items-center rounded-lg hover:border-indigo-500 cursor-pointer transition-colors duration-200">
                                <input type="radio" id="gg0" value="no" x-model="form.youngEntrepreneur"
                                    class="mr-2 text-indigo-600" />
                                <span>Hayır</span>
                            </label>
                        </div>
                    </div>
                </form>
            </div>

            <!-- Results Column -->
            <div class="mt-8 md:mt-0">
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6" x-data="{ 
                        expandedSections: { expenses: false, taxes: false, income: true },
                        groupedResults: {},
                        async init() {
                            results = await calculate(form);
                            this.processResults(results);
                            $watch('results', (value) => this.processResults(value));
                        },
                        processResults(results) {
                            this.groupedResults = results.reduce((acc, item) => {
                                const group = item[3];
                                if (group) {
                                    if (!acc[group]) {
                                        acc[group] = { items: [], total: '' };
                                    }
                                    if (!item[1]) {
                                        acc[group].total = item[0];
                                    } else {
                                        acc[group].items.push(item);
                                    }
                                } else {
                                    if (!acc.other) acc.other = [];
                                    acc.other.push(item);
                                }
                                return acc;
                            }, {});
                        }
                    }"
                    x-init="results = await calculate(form);$watch('form', async (value) => results = await calculate(value))">
                    <h2 class="text-xl font-semibold mb-6 text-gray-800">Hesaplama Sonucu</h2>
                    <table class="min-w-full">
                        <tbody class="divide-y divide-gray-200">
                            <!-- Regular items before groups -->
                            <template x-for="item in groupedResults.other?.filter(item => item[4] === 'before')"
                                :key="item[0]">
                                <tr class="hover:bg-gray-50 transition-colors duration-150">
                                    <td class="py-4 pr-3 text-sm text-gray-600"
                                        :class="{ 'font-semibold text-gray-900': !item[1] }">
                                        <div x-text="item[0]"></div>
                                    </td>
                                    <td class="py-4 pl-3 text-right text-sm font-medium whitespace-nowrap"
                                        x-text="item[1]"></td>
                                </tr>
                            </template>

                            <!-- Collapsible groups -->
                            <template x-for="(group, groupName) in {
                                'expenses': 'Sabit Giderler', 
                                'taxes': 'Vergiler',
                                'income': 'Net Gelir'
                            }" :key="groupName">
                                <template x-if="groupedResults[groupName]">
                                    <tr>
                                        <!-- Group header -->
                                        <td colspan="2" class="p-0">
                                            <div @click="expandedSections[groupName] = !expandedSections[groupName]"
                                                class="flex items-center justify-between hover:bg-gray-50 transition-colors duration-150 cursor-pointer py-4 px-3">
                                                <div class="flex items-center text-sm font-medium text-gray-900">
                                                    <svg class="w-4 h-4 mr-2 transition-transform duration-200 flex-shrink-0"
                                                        :class="expandedSections[groupName] ? 'rotate-90' : ''"
                                                        fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                        <path stroke-linecap="round" stroke-linejoin="round"
                                                            stroke-width="2" d="M9 5l7 7-7 7" />
                                                    </svg>
                                                    <span
                                                        x-text="groupedResults[groupName].items.find(item => item[4] === 'total')[0]"></span>
                                                </div>
                                                <div class="text-sm font-medium whitespace-nowrap"
                                                    x-text="groupedResults[groupName].items.find(item => item[4] === 'total')[1]">
                                                </div>
                                            </div>

                                            <!-- Group items -->
                                            <div x-show="expandedSections[groupName]" class="border-t border-gray-100">
                                                <template
                                                    x-for="item in groupedResults[groupName].items.filter(item => item[4] !== 'total')"
                                                    :key="item[0]">
                                                    <div
                                                        class="flex items-center justify-between hover:bg-gray-50 transition-colors duration-150 bg-gray-50 py-3 px-3">
                                                        <div class="pl-8 text-sm text-gray-600">
                                                            <template x-if="!item[2]">
                                                                <span x-text="item[0]"></span>
                                                            </template>
                                                            <template x-if="item[2]">
                                                                <a x-bind:href="item[2]"
                                                                    class="text-indigo-600 hover:text-indigo-800 border-b border-dashed border-indigo-300"
                                                                    target="_blank" x-text="item[0]"></a>
                                                            </template>
                                                        </div>
                                                        <div class="text-sm font-medium whitespace-nowrap"
                                                            x-text="item[1]"></div>
                                                    </div>
                                                </template>
                                            </div>
                                        </td>
                                    </tr>
                                </template>
                            </template>

                            <!-- Regular items after groups -->
                            <template x-for="item in groupedResults.other?.filter(item => item[4] === 'after')"
                                :key="item[0]">
                                <tr class="hover:bg-gray-50 transition-colors duration-150">
                                    <td class="py-4 pr-3 text-sm text-gray-600"
                                        :class="{ 'font-semibold text-gray-900': !item[1] }">
                                        <div x-text="item[0]"></div>
                                    </td>
                                    <td class="py-4 pl-3 text-right text-sm font-medium whitespace-nowrap"
                                        x-text="item[1]"></td>
                                </tr>
                            </template>
                        </tbody>
                    </table>

                    <!-- Add this after the results table, but still inside the results card -->
                    <div class="mt-6 pt-6 border-t border-gray-100">
                        <div class="flex flex-col space-y-2">
                            <label class="text-sm text-gray-600 font-medium">Bu hesaplamayı paylaş:</label>
                            <div class="flex items-center gap-2">
                                <input type="text" x-ref="shareUrl"
                                    :value="window.location.origin + window.location.pathname + '?data=' + btoa(JSON.stringify(form))"
                                    class="flex-1 text-sm bg-gray-50 border border-gray-200 rounded-lg px-3 py-2 focus:outline-none focus:ring-1 focus:ring-indigo-500"
                                    readonly />
                                <button
                                    @click="$refs.shareUrl.select(); navigator.clipboard.writeText($refs.shareUrl.value)"
                                    class="inline-flex items-center px-3 py-2 border border-gray-200 rounded-lg text-sm font-medium text-gray-600 hover:text-indigo-600 hover:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500 transition-colors duration-200">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                        stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
                                        <path stroke-linecap="round" stroke-linejoin="round"
                                            d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184" />
                                    </svg>
                                    <span class="ml-1">Kopyala</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Add this after the calculator div -->
    <div class="max-w-3xl mx-auto mt-24 px-4">
        <article class="prose prose-lg mx-auto">
            <h2>Yurtdışına Freelance/Remote Çalışanlar İçin Vergi Rehberi</h2>

            <h3>Kimler İçin Geçerli?</h3>
            <p>
                Bu vergi hesaplama aracı aşağıdaki durumlardan birine uyan kişiler için tasarlanmıştır:
            </p>
            <ul>
                <li>Yurtdışındaki şirketlere uzaktan (remote) çalışan yazılımcılar</li>
                <li>Freelance olarak yurtdışına hizmet veren dijital profesyoneller</li>
                <li>Şahıs şirketi üzerinden yurtdışına yazılım hizmeti verenler</li>
                <li>Yurtdışı müşterilere danışmanlık hizmeti verenler</li>
            </ul>

            <h3>Vergi Avantajları</h3>
            <p>
                Türkiye'den yurtdışına yazılım ve bilişim hizmeti veren kişiler için önemli vergi avantajları
                bulunmaktadır:
            </p>
            <ul>
                <li>Yazılım ihracatında %80 vergi istisnası</li>
                <li>29 yaş altı girişimciler için ek vergi muafiyeti</li>
                <li>Yurtdışı kazançlarda KDV istisnası</li>
            </ul>

            <h3>Sıkça Sorulan Sorular</h3>

            <h4>Yurtdışına remote çalışırken şahıs şirketi açmak zorunlu mu?</h4>
            <p>
                Evet, yurtdışına düzenli olarak hizmet veriyorsanız şahıs şirketi açmanız gerekmektedir. Bu, hem yasal
                bir zorunluluk hem de
                vergi avantajlarından yararlanabilmeniz için gereklidir.
            </p>

            <h4>Yazılım ihracatında %80 vergi istisnası nasıl uygulanıyor?</h4>
            <p>
                Yurtdışına verilen yazılım hizmetlerinde, kazanc��n %80'i gelir vergisinden istisnadır. Bu istisna,
                vergilendirilebilir
                gelirin hesaplanmasında düşülür ve kalan %20 üzerinden vergi hesaplanır.
            </p>

            <h4>Genç girişimci desteği nedir?</h4>
            <p>
                29 yaşını doldurmamış genç girişimciler için ilk defa iş kurmaları halinde 3 yıl boyunca 220.000 TL'ye
                kadar kazançları
                gelir vergisinden istisnadır. Bu destek, diğer vergi avantajlarıyla birlikte kullanılabilir.
            </p>

            <h3>Önemli Bağlantılar</h3>
            <ul>
                <li><a href="https://www.gib.gov.tr" target="_blank" rel="noopener">Gelir İdaresi Başkanlığı</a></li>
                <li><a href="https://www.vergidosyasi.com" target="_blank" rel="noopener">Vergi Dosyası</a></li>
                <li><a href="https://www.ivdb.gov.tr" target="_blank" rel="noopener">İstanbul Vergi Dairesi
                        Başkanlığı</a></li>
            </ul>

            <h3>Güncel Vergi Oranları ve Limitler (2024)</h3>
            <ul>
                <li>Yazılım ihracatı vergi istisnası: %80</li>
                <li>Genç girişimci kazanç istisnası: 220.000 TL</li>
                <li>Gelir vergisi dilimleri: %15 - %35</li>
                <li>Bağ-Kur primi: Aylık yaklaşık 2.600 TL</li>
            </ul>

            <h3>Bu Araç Hakkında</h3>
            <p>
                Remote Vergi, yurtdışına çalışan yazılımcıların vergi hesaplamalarını kolaylaştırmak için
                geliştirilmiş açık kaynaklı bir araçtır.
            </p>

            <div class="flex items-center gap-4 my-8">
                <div>
                    Geliştirici:
                    <a href="https://twitter.com/ahmet_php" target="_blank" rel="noopener"
                        class="font-medium text-indigo-600 hover:text-indigo-800">
                        Ahmet Özışık</a>,
                    <a href="https://swiftmade.co" target="_blank" rel="noopener"
                        class="font-medium text-indigo-600 hover:text-indigo-800">
                        Swiftmade OÜ
                    </a>
                </div>
            </div>

            <div class="text-sm text-gray-500 mt-12">
                <p>
                    Son güncelleme: 17 Mart 2024
                </p>
                <p>
                    Not: Vergi mevzuatı sürekli değişmektedir. En güncel bilgiler için her zaman bir mali müşavire
                    danışmanızı öneririz.
                </p>
            </div>
        </article>
    </div>

    <!-- Simplified footer with just the disclaimer -->
    <footer class="max-w-3xl mx-auto mt-8 px-4 pb-16">
        <div class="prose prose-lg mx-auto">
            <hr class="my-8">

            <h3 class="text-base">Yasal Uyarı</h3>
            <div class="text-gray-500 text-xs space-y-4">
                <p>
                    Bu web sitesi ve vergi hesaplama aracı, yalnızca bilgilendirme amaçlıdır ve herhangi bir yasal
                    tavsiye niteliği taşımamaktadır. Sunulan bilgiler ve hesaplamalar, genel vergi kurallarına
                    dayanmakta olup, özel durumunuza özgü farklılıklar gösterebilir.
                </p>

                <p>
                    Vergi mevzuatı karmaşık olup sürekli değişmektedir. Bu nedenle, vergi planlamanızı yaparken
                    mutlaka bir mali müşavir veya vergi danışmanına başvurmanızı öneririz. Bu araçta yapılan
                    hesaplamalar ve sunulan bilgiler nedeniyle oluşabilecek herhangi bir zarardan dolayı sorumluluk
                    kabul edilmemektedir.
                </p>

                <p>
                    Tüm hesaplamalar yaklaşık değerler içermekte olup, gerçek vergi yükümlülükleriniz farklılık
                    gösterebilir. Özellikle döviz kurları, vergi dilimleri ve muafiyet limitleri gibi değişkenler
                    sürekli güncellenmektedir.
                </p>
            </div>
        </div>
    </footer>
</body>

</html>